<p>
<%= collection_select("fans_by_state", :state, Fan.find(:all, :select => 'DISTINCT state'), :state, :state, {:prompt => "Select a state"})
 %>
</p>

<%= observe_field("fans_by_state_state", :frequency => 1, :on => 'select', :url => { :action => :update_fan_count}, :with => 'fans_by_state') %>